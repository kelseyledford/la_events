<nav class="art_nav"> 
  <%= render partial: "shared/navbar" %>
</nav>

<% flash.each do |key, value| %>
    <%= value %>
<% end %>

<div class="container">
  <h1><%= @artevent.name %></h1>

  Date: <%= @artevent.event_date.strftime("%m/%d/%y")%>
  <br>
  Time: <%= @artevent.start_time.strftime("%l:%M%p") %> - <%= @artevent.end_time.strftime("%l:%M%p") %>
  <br>
  Details: <%= @artevent.details %>
  <br>
  Address: <%= @artevent.street %>, <%= @artevent.city %>, <%= @artevent.state %>, <%= @artevent.zip %>
  <br>
  <!-- Google Map goes here -->
  <div style='width: 800px;'>
    <div id="map" style='width: 800px; height: 400px;'></div>
  </div>
  <br>
  <% if @artevent.updated_by_id != nil %>
    Last updated by: <%= @artevent.updated_by_id %>
  <% end %>
  <br>
  <% if @artevent.created_by_id != nil %>
    Created by: <%= @artevent.created_by_id %>
  <% end %>
  <br>
  <%= link_to "Update this event", edit_art_event_path(@artevent) %>
  <br>
  <% if current_user.is_admin? %>
    <%= link_to "Delete this event", @artevent, method: :delete, data: { confirm: 'Are you sure you want to delete this artevent?' } %>
  <% end %>
  <br>
  <%= link_to "Back to the Events Page", art_events_path %>

   <script type ="text/javascript">
  	var handler = Gmaps.build('Google');
    handler.buildMap({ provider: {zoom: 16, provider_key: "AIzaSyBnugBXbtHJ6qqIyILKqKPQ1l2rafKtjx0"}, internal: {id: 'map'}}, function(){
    markers = handler.addMarker(
      {
        lat: <%= @artevent.to_coordinates[0] %>,
        lng: <%= @artevent.to_coordinates[1] %>
      }
    );
    handler.map.centerOn({
        lat: <%= @artevent.to_coordinates[0] %>,
        lng: <%= @artevent.to_coordinates[1] %>
      });
  });
  </script>
</div>