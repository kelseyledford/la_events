<nav class="fest_nav">  
  <%= render partial: "shared/navbar" %>
</nav>


<% flash.each do |key, value| %>
    <%= value %>
<% end %>

<div class="container">
  <h1 class="header"><%= @festival.name %></h1>
  <div class="row">
    <div class="col-md-6 show_col_1">
      <p class="bold inline">Date:  </p>
      <%= @festival.event_date.strftime("%m/%d/%y")%>
      <br><br>
      <p class="bold inline">Time:  </p>
      <%= @festival.start_time.strftime("%l:%M%p") %> - <%= @festival.end_time.strftime("%l:%M%p") %>
      <br><br>
      <p class="bold">Address:</p> 
      <%= @festival.street %>, <%= @festival.city %>, <%= @festival.state %>, <%= @festival.zip %>
      <br><br>
      <p class="bold inline">Price: </p><%= @festival.price %>
      <br><br>
      <% if @festival.details != "" %>
       <p class="bold">Details:</p> 
        <%= @festival.details %>
      <% end %>
      <br><br>
      <% if @festival.updated_by_id != nil %>
        <em>Last updated by:</em> 
        <%= @festival.updated_by_id %>
      <% end %>
      <% if @festival.updated_by_id != nil && @festival.created_by_id != nil %>
        ~ 
      <% end %>
      <% if @festival.created_by_id != nil %>
        <em>Created by:</em> 
        <%= @festival.created_by_id %>
      <% end %>
      <br><br>
      <%= link_to "Update", edit_festival_path(@festival) %>
        ~  
      <% if current_user.is_admin? %>
        <%= link_to "Delete", @festival, method: :delete, data: { confirm: 'Are you sure you want to delete this festival?' } %>
      <% end %>
      <br><br>
      <span class="glyphicon glyphicon-chevron-left"></span>
      <%= link_to " Back to the Festivals Page", festivals_path %>
    </div>
  <!-- Google Map goes here -->
    <div class="col-md-6" style='width: 400px;'>
      <div id="map" style='width: 400px; height: 400px;'></div>
    </div>
  </div>

   <script type ="text/javascript">
  	var handler = Gmaps.build('Google');
    handler.buildMap({ provider: {zoom: 14, provider_key: "AIzaSyBnugBXbtHJ6qqIyILKqKPQ1l2rafKtjx0"}, internal: {id: 'map'}}, function(){
    markers = handler.addMarker(
      {
        lat: <%= @festival.to_coordinates[0] %>,
        lng: <%= @festival.to_coordinates[1] %>
      }
    );
    handler.map.centerOn({
        lat: <%= @festival.to_coordinates[0] %>,
        lng: <%= @festival.to_coordinates[1] %>
      });
  });
  </script>
</div>